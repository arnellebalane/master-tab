var t,e=new(function(t){var e=function(){this.$listeners={}};e.prototype.on=function(t,e){this.$listeners[t]||(this.$listeners[t]=[]),this.$listeners[t].push(e)},e.prototype.off=function(t,e){if(this.$listeners[t]){if(e instanceof Function){var n=this.$listeners[t].indexOf(e);this.$listeners[t].splice(n,1)}this.$listeners[t].length&&e||delete this.$listeners[t]}},e.prototype.emit=function(t,e){this.$listeners[t]&&this.$listeners[t].forEach(function(t){return t(e)})},t.exports=e}(t={exports:{}},t.exports),t.exports),n=e.STORAGE_KEY||"mastertab",i=e.INSTANCE_ID||Math.floor(65536*Math.random()).toString(16),s="a",r="p",o="h",a=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n].split(":");if(i[1]===e)return i[0]}return null},l=function(t){for(var n=t?t.split(";"):[],l=0,u=[s,r,o];l<u.length;l+=1){var c=a(n,u[l]);if(c)return e.emit("change",c===i)}};["pageshow","pagehide","focus","blur","visibilitychange"].forEach(function(t){window.addEventListener(t,function(){var t=localStorage.getItem(n),e=t?t.split(";"):[],a=e.findIndex(function(t){return t.split(":")[0]===i});a<0&&(a=e.length);var u="hidden"===document.visibilityState?o:document.hasFocus()?s:r;e[a]=[i,u].join(":"),u===s&&(e.push(e[a]),e.splice(a,1));var c=e.join(";");localStorage.setItem(n,c),l(c)})}),window.addEventListener("unload",function(){var t=localStorage.getItem(n),e=t?t.split(";"):[],s=e.findIndex(function(t){return t.split(":")[0]===i});s>=0&&e.splice(s,1);var r=e.join(";");localStorage.setItem(n,r)}),window.addEventListener("storage",function(t){t.key===n&&l(t.newValue)});export default e;
//# sourceMappingURL=master-tab.mjs.map
