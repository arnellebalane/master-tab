var t=new(function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){var e=function(){this.$listeners={}};e.prototype.on=function(t,e){this.$listeners[t]||(this.$listeners[t]=[]),this.$listeners[t].push(e)},e.prototype.off=function(t,e){if(this.$listeners[t]){if(e instanceof Function){var n=this.$listeners[t].indexOf(e);this.$listeners[t].splice(n,1)}this.$listeners[t].length&&e||delete this.$listeners[t]}},e.prototype.emit=function(t,e){this.$listeners[t]&&this.$listeners[t].forEach(function(t){return t(e)})},t.exports=e})),e=t.STORAGE_KEY||"mastertab",n=t.INSTANCE_ID||Math.floor(65536*Math.random()).toString(16),i="a",s="p",r="h",o=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n].split(":");if(i[1]===e)return i[0]}return null},l=function(e){for(var l=e?e.split(";"):[],a=0,u=[i,s,r];a<u.length;a+=1){var c=o(l,u[a]);if(c)return t.emit("change",c===n)}};["pageshow","pagehide","focus","blur","visibilitychange"].forEach(function(t){window.addEventListener(t,function(){var t=localStorage.getItem(e),o=t?t.split(";"):[],a=o.findIndex(function(t){return t.split(":")[0]===n});a<0&&(a=o.length);var u="hidden"===document.visibilityState?r:document.hasFocus()?i:s;o[a]=[n,u].join(":"),u===i&&(o.push(o[a]),o.splice(a,1));var c=o.join(";");localStorage.setItem(e,c),l(c)})}),window.addEventListener("unload",function(){var t=localStorage.getItem(e),i=t?t.split(";"):[],s=i.findIndex(function(t){return t.split(":")[0]===n});s>=0&&i.splice(s,1);var r=i.join(";");localStorage.setItem(e,r)}),window.addEventListener("storage",function(t){t.key===e&&l(t.newValue)}),module.exports=t;
//# sourceMappingURL=master-tab.js.map
